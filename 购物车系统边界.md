# 购物车

## 1，系统边界

从用户视角来看，购物车模块包括增删改查购物车记录。从功能视角来看，购物车模块是一个用户预购买商品的暂存地，整合了支撑交易功能的底层服务，服务包括商品，满额满件，优惠券。另外购物车还为下单提供了必要的数据。

## 2，依赖和被依赖关系

### 1,依赖

- 同商品的依赖关系：购物车列表和商品的依赖是最紧密的，以至于在购物车的数据读取类里面直接嵌入了商品数据读取的代码。根据sku_id向商品模块读取sku的详细信息，包括价格，商品名称，库存等。
- 同满额满件的依赖关系：加载完购物车的主信息（包括商品信息）后，会根据shop_id获取商家设置的满额满件的数据。
- 同优惠券的依赖关系：根据用户id和购物车商品所属店铺id获取商家所设置的店铺优惠券数据。

### 2,被依赖
- 同下单的依赖关系：购物车下单时会用到购物车的数据，购物车主表里面的每一条记录（以sid为主键的一条记录）表示一个sku，在订单确认页面或提交订单都会根据sid来获取商品的价格，库存，上下架等数据（实际上，会根据sid再去商品系统取一下数据）。下单完成后，系统会删除掉使用到的sid记录。



